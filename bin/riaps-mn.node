#!/bin/sh
# Set up a virtual host 
# To be run 'non-lead' nodes
# For riaps developers - NOT APP DEVELOPERS 

# Add default gateway (mininet)
route add default gw 192.168.57.1

# Add route to outer net 
ip route add 192.168.56.0/24 via 192.168.57.126

# Make sure that tmp folder exists
if [ ! -d "tmp" ]; then
        mkdir tmp
fi

# Launch deplo as root
echo "source setup.node; export LD_LIBRARY_PATH=/opt/riaps/amd64/lib:/usr/local/lib; riaps_deplo" | sudo -s -u root
